<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Good Morning Tech</title>
        <link href="https://fonts.gstatic.com" rel="preconnect"/>
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;400;500&display=swap"
              rel="stylesheet"/>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500&display=swap"
              rel="stylesheet"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        :root {
            --main-bg-color: #000000; /* TODO: Edit variable with Flask */
            --main-text-color: #ffffff; /* TODO: Edit variable with Flask */
        }

        body {
            margin: 0;
        }

        td, p {
            font-size: 1em;
            color: var(--main-text-color);
        }

        p {
            display: inline-block;
        }

        ul {
            margin: 0 0 10px 25px;
            padding: 0;
        }

        li {
            margin: 0 0 3px 0;
        }

        h1, h2 {
            color: var(--main-text-color);
        }

        h1 {
            font-size: 25px;
            border-left: 7px solid #BD4646;
            padding-left: 10px;
        }

        h2 {
            font-size: 30px;
        }

        a {
            color: #2F82DE;
            font-weight: bold;
            text-decoration: none;
            font-size: 1em;
        }

        .email-body {
            width: 100%;
            padding: 20px 0;
            font-family: Lucida Grande, Lucida Sans Unicode, Verdana, sans-serif;
            line-height: 1.5;
            min-width: 320px;
            margin: 0 auto;
            background: var(--main-bg-color);
            border-collapse: collapse;
        }

        img {
            width: 100%;
            display: inline-block;
        }

        .email-header {
            background: var(--main-bg-color);
            padding: 30px;
            border-bottom: 3px solid #BD4646;
        }

        .gmt-logo {
            max-width: 300px;
        }


        .email-header a {
            display: block;
            height: 50%;
        }

        .email-header a svg {
            width: 25vw;
            max-width: 200px;
        }

        .news-section {
            padding: 20px 30px;
            font-family: "Fira Sans",serif;
        }

        .news-image {
         border-radius: 20px;
        }

        .source-name {
            color: #CF3333;
        }

        .footer {
            background: var(--main-bg-color);
            padding: 10px;
            font-size: 10px;
            text-align: center;
        }

        .trending-repos {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            grid-gap: 1em;
            margin-bottom: 1em;
        }

        .repo-card {
            display: flex;
            flex-direction: column;
            padding: 1em;
            background-color: #1B1F23;
            border-radius: 4px;
        }

        .repo-info {
            margin-bottom: 1em;
        }

        .repo-name {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .repo-badges {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .repo-description {
            font-size: 1rem;
        }

        .github-logo {
            width: 40px;
            height: 40px;
            fill: #ffffff;
        }

        .daily-coding-challenge {
            background-color: #1B1F23;
            padding: 1em;
            border-radius: 4px;
            margin-top: 1em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .challenge-description {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 0;
        }

        .solve-button {
            background-color: #2F82DE;
            color: #ffffff;
            border: none;
            border-radius: 4px;
            padding: 0.8em 1.2em;
            font-size: 1rem;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .solve-button:hover {
            background-color: #2458A2;
        }

        @media only screen and (min-width: 1000px) {
            p {
                float: right;
                width: 35%;
            }

            img {
                max-width: 60%;
                float: left;
            }

            .trending-repos {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }

        @media only screen and (max-width: 1000px) {
            .email-body {
                max-width: 100% !important;
            }
        }
        </style>
    </head>
    <body>
        <table class="email-body">
            <tr>
                <td class="email-header">
                    <a>
                        <img alt="Good Morning Tech Logo" class="gmt-logo"
                             src="https://cdn.goodmorningtech.news/logo.png">
                    </a>
                </td>
            </tr>
            <tr>
                <td class="news-section">
                    <h2>
                        {{ random_language_greeting[1] }} (Good Morning in
                        {{ random_language_greeting[0] }})
                    </h2>
                    <p style='width: 100%;'>Here's the latest in tech news just for you, happy reading!</p>
                </td>
            </tr>
            {% for post in posts %}
                <tr>
                    <td class="news-section">
                        <h1>{{ post.title }}</h1>
                        <a>
                            <img class="news-image" src="{{ post.thumbnail }}">
                        </a>
                        <p style="font-family: 'Open Sans',serif">{{ markdown(post.description) | safe }}</p>
                        <p>
                            News by <span class="source-name">{{ post.formatted_source }}</span>
                        </p>
                        <p>
                            <a href="{{ post.url }}">Read Full Article &rarr;</a>
                        </p>
                    </td>
                </tr>
            {% endfor %}
            <tr>
                <td class="news-section">
                    <h1>GitHub Trending Repositories</h1>
                    <div class="trending-repos">
                        {% for repo in repos %}
                            <div class="repo-card">
                                <div class="repo-info">
                                    <div class="repo-name">
                                        <a href="{{ repo.repo_url }}">{{ repo.whole_name }}</a>
                                    </div>
                                    <div class="repo-description">{{ repo.description }}</div>
                                </div>
                                <div class="repo-badges">
                                    <div class="repo-language" style="color: {{ repo.language_color }};">{{ repo.language }}</div>
                                    <div>
                                        <span class="badge"
                                              style="background-color: #a5a5a5;
                                                     border-radius: 10px;
                                                     padding: 0 5px 0 5px">
                                            <svg fill="none"
                                                 height="15"
                                                 viewBox="0 0 16 15"
                                                 width="16"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7.99998 0.25C8.13999 0.24991 8.27724 0.289014 8.39618 0.362887C8.51512 0.43676 8.611 0.542452 8.67298 0.668L10.555 4.483L14.765 5.095C14.9034 5.11511 15.0335 5.17355 15.1405 5.26372C15.2475 5.35388 15.3271 5.47218 15.3704 5.60523C15.4137 5.73829 15.4189 5.8808 15.3854 6.01665C15.3519 6.1525 15.2811 6.27628 15.181 6.374L12.135 9.344L12.854 13.536C12.8773 13.6738 12.8617 13.8154 12.8089 13.9449C12.7561 14.0743 12.6682 14.1865 12.5551 14.2687C12.442 14.3509 12.3083 14.3999 12.1689 14.4102C12.0294 14.4205 11.8899 14.3917 11.766 14.327L7.99998 12.347L4.23398 14.327C4.11017 14.392 3.97065 14.4211 3.83117 14.411C3.6917 14.4009 3.55782 14.352 3.44466 14.2699C3.33151 14.1877 3.24357 14.0755 3.19079 13.946C3.13802 13.8165 3.12249 13.6749 3.14598 13.537L3.86598 9.343L0.817981 6.374C0.717548 6.27632 0.646481 6.15247 0.612833 6.01647C0.579186 5.88047 0.584303 5.73777 0.627606 5.60453C0.670908 5.47129 0.750665 5.35284 0.857837 5.26261C0.96501 5.17238 1.09531 5.11397 1.23398 5.094L5.44398 4.483L7.32698 0.668C7.38896 0.542452 7.48485 0.43676 7.60379 0.362887C7.72272 0.289014 7.85997 0.24991 7.99998 0.25ZM7.99998 2.695L6.61498 5.5C6.5612 5.6089 6.48177 5.70311 6.38353 5.77453C6.28528 5.84595 6.17116 5.89244 6.05098 5.91L2.95398 6.36L5.19398 8.544C5.28113 8.62886 5.34634 8.73365 5.38397 8.84933C5.4216 8.96501 5.43052 9.0881 5.40998 9.208L4.88198 12.292L7.65098 10.836C7.75861 10.7794 7.87838 10.7499 7.99998 10.7499C8.12158 10.7499 8.24135 10.7794 8.34898 10.836L11.119 12.292L10.589 9.208C10.5684 9.0881 10.5774 8.96501 10.615 8.84933C10.6526 8.73365 10.7178 8.62886 10.805 8.544L13.045 6.361L9.94898 5.911C9.8288 5.89344 9.71468 5.84695 9.61644 5.77553C9.51819 5.70411 9.43877 5.6099 9.38498 5.501L7.99998 2.695Z"
                                                fill="#D7D7D7"></path>
                                            </svg>
                                        {{ repo.total_stars }}</span>
                                        <span class="badge"
                                              style="background-color: #a5a5a5;
                                                     border-radius: 10px;
                                                     padding: 0 5px 0 5px">
                                            <svg fill="none"
                                                 height="15"
                                                 viewBox="0 0 12 15"
                                                 width="12"
                                                 xmlns="http://www.w3.org/2000/svg">
                                                <path d="M3 4.372V5.25C3 5.664 3.336 6 3.75 6H8.25C8.44892 6 8.63968 5.92098 8.78033 5.78033C8.92099 5.63968 9 5.44891 9 5.25V4.372C8.49959 4.19508 8.07784 3.84695 7.80928 3.38914C7.54072 2.93133 7.44265 2.39332 7.53241 1.8702C7.62216 1.34708 7.89396 0.872527 8.29976 0.530421C8.70556 0.188314 9.21924 0.000679016 9.75 0.000679016C10.2808 0.000679016 10.7944 0.188314 11.2002 0.530421C11.6061 0.872527 11.8778 1.34708 11.9676 1.8702C12.0574 2.39332 11.9593 2.93133 11.6907 3.38914C11.4222 3.84695 11.0004 4.19508 10.5 4.372V5.25C10.5 5.84674 10.263 6.41903 9.84099 6.84099C9.41904 7.26295 8.84674 7.5 8.25 7.5H6.75V9.628C7.25069 9.80493 7.67271 10.1532 7.94146 10.6112C8.2102 11.0692 8.30837 11.6075 8.21862 12.1309C8.12886 12.6542 7.85695 13.1291 7.45096 13.4713C7.04497 13.8136 6.53104 14.0014 6 14.0014C5.46897 14.0014 4.95504 13.8136 4.54905 13.4713C4.14306 13.1291 3.87115 12.6542 3.78139 12.1309C3.69164 11.6075 3.78981 11.0692 4.05855 10.6112C4.3273 10.1532 4.74932 9.80493 5.25 9.628V7.5H3.75C3.15327 7.5 2.58097 7.26295 2.15901 6.84099C1.73706 6.41903 1.5 5.84674 1.5 5.25V4.372C0.999594 4.19508 0.577839 3.84695 0.309281 3.38914C0.0407231 2.93133 -0.0573456 2.39332 0.0324079 1.8702C0.122161 1.34708 0.393958 0.872527 0.79976 0.530421C1.20556 0.188314 1.71924 0.000679016 2.25 0.000679016C2.78077 0.000679016 3.29445 0.188314 3.70025 0.530421C4.10605 0.872527 4.37785 1.34708 4.4676 1.8702C4.55735 2.39332 4.45929 2.93133 4.19073 3.38914C3.92217 3.84695 3.50042 4.19508 3 4.372ZM3 2.25C3 2.05109 2.92099 1.86032 2.78033 1.71967C2.63968 1.57902 2.44892 1.5 2.25 1.5C2.05109 1.5 1.86033 1.57902 1.71967 1.71967C1.57902 1.86032 1.5 2.05109 1.5 2.25C1.5 2.44891 1.57902 2.63968 1.71967 2.78033C1.86033 2.92098 2.05109 3 2.25 3C2.44892 3 2.63968 2.92098 2.78033 2.78033C2.92099 2.63968 3 2.44891 3 2.25ZM9.75 3C9.94892 3 10.1397 2.92098 10.2803 2.78033C10.421 2.63968 10.5 2.44891 10.5 2.25C10.5 2.05109 10.421 1.86032 10.2803 1.71967C10.1397 1.57902 9.94892 1.5 9.75 1.5C9.55109 1.5 9.36033 1.57902 9.21968 1.71967C9.07902 1.86032 9 2.05109 9 2.25C9 2.44891 9.07902 2.63968 9.21968 2.78033C9.36033 2.92098 9.55109 3 9.75 3ZM6.75 11.75C6.75 11.5511 6.67099 11.3603 6.53033 11.2197C6.38968 11.079 6.19892 11 6 11C5.80109 11 5.61033 11.079 5.46967 11.2197C5.32902 11.3603 5.25 11.5511 5.25 11.75C5.25 11.9489 5.32902 12.1397 5.46967 12.2803C5.61033 12.421 5.80109 12.5 6 12.5C6.19892 12.5 6.38968 12.421 6.53033 12.2803C6.67099 12.1397 6.75 11.9489 6.75 11.75Z"
                                                fill="#D7D7D7"></path>
                                            </svg>
                                        {{ repo.forks }}</span>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <h1 class="text-5xl font-bold mb-6 text-center font-gmt-fira">
                        Daily Coding
                        Challenge: {{ coding_challenge.title }}
                    </h1>
                    {{ coding_challenge.description | safe }}
                        <div class="footer">
                            You are receiving this email because you subscribed to Good Morning Tech. You can <a href="{{ domain_name + '/unsubscribe' }}">instantly opt out</a> any time.
                        </div>
                </td>
            </tr>
            </table>
        </body>
    </html>
